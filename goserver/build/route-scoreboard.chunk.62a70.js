(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"FrX+":function(e,t,n){"use strict";function r(e){return Object(o.h)(u.a,{...e,glyph:"clock",viewBox:"0 0 24 24"})}n.d(t,"a",(function(){return r}));var o=n("sL3o"),i=n("ziER"),a=n.n(i),c=n("5JeM"),s=n.n(c),u=n("VXtC");const l=new a.a({id:"clock",use:"clock-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ffffff" id="clock"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></symbol>'});s.a.add(l)},JXlG:function(e,t,n){"use strict";(function(e){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=n("sL3o"),s=n("+mXV"),u=n("C+Gs"),l=n("obyI"),f=n("Xjb4"),d=function(e){var t=e.minX;return(e.time-t)/(e.maxX-t)*e.width},b=function(e){var t=parseInt(e.slice(-12),16)+1;return"rgba(186, "+89*t%128+", "+53*t%128+", 0.8)"},p=Object(f.b)((function(t){var n=t.points,r=t.onTooltipIn,o=t.onMouseMove,i=t.onMouseOut,s=t.name,u=t.currentScore,l=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(t,["points","onTooltipIn","onMouseMove","onMouseOut","name","currentScore"]);return e(c.Fragment,null,e("polyline",a({},l,{points:n,"stroke-width":2,"stroke-linecap":"round",fill:"transparent","pointer-events":"none"})),e("polyline",{"stroke-width":12,points:n,"stroke-linecap":"round",fill:"transparent","pointer-events":"stroke",onMouseOver:r(s+" - "+u+" points"),onMouseMove:o,onMouseOut:i}))}));t.a=Object(u.a)({root:{marginBottom:"20px",background:"#222","& .frame__body":{padding:"20px"}},tooltip:{position:"fixed",pointerEvents:"none",background:"#fff",color:"#222",padding:"5px 10px",borderRadius:"5px",margin:"5px",top:"0",left:"0"}},(function(t){var n=t.graphData,r=t.classes,i=Object(s.i)(null),a=Object(s.j)(window.innerWidth),u=a[0],f=a[1],v=Object(s.a)((function(){null!==i.current&&f(i.current.getBoundingClientRect().width)}),[]),m=Object(s.j)({x:0,y:0,content:""}),g=m[0],h=m[1];Object(s.f)((function(){v()}),[v]),Object(s.d)((function(){function e(){v()}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[v]);var O=Object(s.g)((function(){if(!n||0===n.length)return{polylines:[],labels:[]};var e=l.a.startTime,t=Math.min(Date.now(),l.a.endTime),r=0;n.graph.forEach((function(e){e.points.forEach((function(e){e.score>r&&(r=e.score)}))}));var o=function(e){var t=e.minX,n=e.maxX,r=e.width,o=[],i=864e5*Math.ceil((n-t)/r*200/864e5),a=new Date(t).setHours(0,0,0,0);a%i!=0&&(a+=i);for(var c=a;c<=n;c+=i)o.push({label:new Date(c).toLocaleDateString(),x:d({minX:t,maxX:n,time:c,width:r})});return o}({minX:e,maxX:t,width:u});return{polylines:n.graph.map((function(n){return function(e){var t=e.id,n=e.name,r=e.currentScore,o=e.maxX,i=e.minX,a=e.maxY,c=e.width,s=e.points.map((function(e){return d({minX:i,maxX:o,time:e.time,width:c})+" "+400*(1-e.score/a)}));return{color:b(t),name:n,currentScore:r,points:s.join(",")}}({points:n.points,id:n.id,name:n.name,currentScore:n.points[0].score,maxX:t,minX:e,maxY:r,width:u})})),labels:o}}),[n,u]),j=O.polylines,y=O.labels,w=Object(s.a)((function(e){return function(){h((function(t){return o(o({},t),{},{content:e})}))}}),[]),k=Object(s.a)((function(e){h((function(t){return o(o({},t),{},{x:e.clientX,y:e.clientY})}))}),[]),P=Object(s.a)((function(){h((function(e){return o(o({},e),{},{content:""})}))}),[]);return null===n?null:e("div",{class:"frame "+r.root},e("div",{class:"frame__body"},e("svg",{ref:i,viewBox:"-22 -2 "+(u+4+20)+" 444"},e(c.Fragment,null,j.map((function(t,n){return e(p,{key:n,stroke:t.color,points:t.points,name:t.name,currentScore:t.currentScore,onMouseMove:k,onMouseOut:P,onTooltipIn:w})}))),e(c.Fragment,null,y.map((function(t,n){return e("text",{x:t.x,y:440,key:n,fill:"#fff"},t.label)}))),e("line",{x1:-20,y1:420,x2:u,y2:420,stroke:"var(--cirrus-bg)","stroke-linecap":"round","stroke-width":2}),e("line",{x1:-20,y1:"0",x2:-20,y2:420,stroke:"var(--cirrus-bg)","stroke-linecap":"round","stroke-width":2}))),g.content&&e("div",{class:r.tooltip,style:{transform:"translate("+g.x+"px, "+g.y+"px)"}},g.content))}))}).call(this,n("sL3o").h)},O1lG:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("vgrf"),o=function(){return new Promise((function(e,t){var n;return Promise.resolve(Object(r.b)("GET","/users/me")).then((function(o){try{return n=o,e(Object(r.a)({resp:n,valid:["goodUserData"]}))}catch(e){return t(e)}}),t)}))},i=function(e){return new Promise((function(t,n){return Promise.resolve(fetch("/api/users/me",{headers:{authorization:"Bearer "+e.authToken}})).then((function(e){try{return Promise.resolve(e.json()).then((function(e){try{return t(e.data)}catch(e){return n(e)}}),n)}catch(e){return n(e)}}),n)}))},a=function(e){return new Promise((function(t,n){var o;return Promise.resolve(Object(r.b)("GET","/users/"+encodeURIComponent(e))).then((function(e){try{return o=e,t(Object(r.a)({resp:o,valid:["goodUserData"]}))}catch(e){return n(e)}}),n)}))},c=function(e){return new Promise((function(t,n){var o,i,a,c,s;return o=e.name,i=e.division,Promise.resolve(Object(r.b)("PATCH","/users/me",{name:o,division:i})).then((function(e){try{return"badRateLimit"===(a=e).kind?(c=Math.floor(a.data.timeLeft/1e3),s=Math.floor(c/60),t({error:"Please wait "+(0===s?c+" seconds":s+" minutes")+" before trying this again"})):t(Object(r.a)({resp:a,valid:["goodUserUpdate"]}))}catch(e){return n(e)}}),n)}))},s=function(e){return new Promise((function(t,n){var o,i,a;return o=e.email,i=e.recaptchaCode,Promise.resolve(Object(r.b)("PUT","/users/me/auth/email",{email:o,recaptchaCode:i})).then((function(e){try{return a=e,t(Object(r.a)({resp:a,valid:["goodVerifySent","goodEmailSet"],resolveDataMessage:!0}))}catch(e){return n(e)}}),n)}))},u=function(){return new Promise((function(e,t){var n;return Promise.resolve(Object(r.b)("DELETE","/users/me/auth/email")).then((function(o){try{return n=o,e(Object(r.a)({resp:n,valid:["goodEmailRemoved","badEmailNoExists"],resolveDataMessage:!0}))}catch(e){return t(e)}}),t)}))}},VXtC:function(e,t,n){"use strict";(function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(t){var n=t.glyph,o=t.viewBox,i=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(t,["glyph","viewBox"]);return e("svg",r({},i,{viewBox:o,xmlns:"http://www.w3.org/2000/svg"}),e("use",{xlinkHref:"#"+n}))}n.d(t,"a",(function(){return o}))}).call(this,n("sL3o").h)},WX8x:function(e,t,n){"use strict";(function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(t){var n=t.onClick,o=t.disabled,a=t.selected,c=t.children,s=t.tabindex,u=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(t,["onClick","disabled","selected","children","tabindex"]),l=u.class||"";delete u.class;var f=Object(i.a)((function(e){e.preventDefault(),n()}),[n]);return e("div",r({class:"pagination-item short "+l+(a?" selected":"")},u),e("a",{disabled:o,href:n&&"#",onClick:f,tabindex:s},c))}var i=n("+mXV"),a=n("sL3o"),c=n("C+Gs"),s=Object(c.a)({noHover:{backgroundColor:"transparent !important"},ellipses:{paddingLeft:"0.1em !important",paddingRight:"0.1em !important"}},(function(t){var n=t.classes,r=Object(i.a)((function(e){return e.target.blur()}),[]);return e("div",{class:"pagination-item short "+n.noHover},e("a",{class:"ellipses "+n.ellipses,tabindex:"-1",onFocus:r},"â€¦"))}));t.a=function(t){var n=t.page,r=t.setPage,c=t.numVisiblePages;c=c||9;var u=Math.ceil(t.totalItems/t.pageSize),l=Object(i.g)((function(){var e,t;u<=c?(e=1,t=u):(e=n-Math.ceil((c-1)/2),t=n+Math.floor((c-1)/2),e<1?(e=1,t=c):t>u&&(t=u,e=u-c+1),e>1&&(e+=2),t<u&&(t-=2));for(var r=[],o=e;o<=t;o++)r.push(o);return{pages:r,startPage:e,endPage:t}}),[u,n,c]),f=l.pages,d=l.startPage,b=l.endPage,p=Object(i.g)((function(){for(var e=[],t=function(t){e.push((function(){return r(t)}))},n=1;n<=u;n++)t(n);return e}),[r,u]);return e("div",{class:"pagination u-center"},e(o,{disabled:1===n,key:"<",onClick:p[n-1-1]},"<"),d>1&&e(a.Fragment,null,e(o,{key:1,onClick:p[0]},"1"),e(s,{key:".<"})),f.map((function(t){return e(o,{selected:t===n,key:t,onClick:p[t-1]},t)})),b<u&&e(a.Fragment,null,e(s,{key:".>"}),e(o,{key:u,onClick:p[u-1]},u)),e(o,{disabled:n===u,key:">",onClick:p[n+1-1]},">"))}}).call(this,n("sL3o").h)},"YM+X":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("vgrf"),o=function(e){var t=e.division,n=e.limit,o=void 0===n?100:n,i=e.offset,a=void 0===i?0:i;return Object(r.b)("GET","/leaderboard/now",{division:t,limit:o,offset:a})},i=function(e){return new Promise((function(t){var n=e.division;return t(Object(r.b)("GET","/leaderboard/graph",{division:n,limit:10}))}))}},pEbl:function(e,t,n){"use strict";(function(e){var r=n("C+Gs"),o=n("FrX+"),i=n("obyI"),a=Object(r.a)({card:{background:"#222",padding:"30px !important",flexDirection:"column"},icon:{width:"60px"}},(function(t){var n=t.classes;return e("div",{class:"row"},e("div",{class:"card u-center col-6 "+n.card},e("div",{class:n.icon},e(o.a,null)),e("h4",null,i.a.ctfName," has not started yet.")))}));t.a=a}).call(this,n("sL3o").h)},uRlC:function(e,t,n){"use strict";n.r(t),function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n("+mXV"),s=n("obyI"),u=n("C+Gs"),l=n("WX8x"),f=n("JXlG"),d=n("pEbl"),b=n("ucLl"),p=n("YM+X"),v=n("O1lG"),m=[25,50,100],g=0,h=1,O=2,j=Object(u.a)({frame:{paddingBottom:"1.5em",paddingTop:"2.125em",background:"#222","& .frame__subtitle":{color:"#fff"},"& button, & select, & option":{background:"#111",color:"#fff"}},tableFrame:{paddingTop:"1.5em"},selected:{backgroundColor:"rgba(216,216,216,.07)","&:hover":{backgroundColor:"rgba(216,216,216,.20) !important"}},table:{tableLayout:"fixed","& tbody td":{overflow:"hidden",whiteSpace:"nowrap"}}},(function(t){var n=t.classes,o=Object(c.g)((function(){return null!==localStorage.getItem("token")}),[]),a=Object(c.g)((function(){var e=JSON.parse(localStorage.getItem("scoreboardPageState")||"{}"),t=new URLSearchParams(location.search),n={};if(t.has("page")){var r=parseInt(t.get("page"));isNaN(r)||(n.page=r)}if(t.has("pageSize")){var o=parseInt(t.get("pageSize"));isNaN(o)||(n.pageSize=o)}return t.has("division")&&(n.division=t.get("division")),i(i({},e),n)}),[]),u=Object(c.j)(null),j=u[0],y=u[1],w=Object(c.j)(a.pageSize||100),k=w[0],P=w[1],x=Object(c.j)([]),S=x[0],M=x[1],C=Object(c.j)(null),X=C[0],E=C[1],D=Object(c.j)(a.division||"all"),L=D[0],I=D[1],T=Object(c.j)(a.page||1),z=T[0],_=T[1],G=Object(c.j)(0),N=G[0],B=G[1],F=Object(c.j)(g),R=F[0],V=F[1],U=Object(c.j)(g),J=U[0],H=U[1],Y=Object(c.i)(),W=Object(b.b)().toast,q=Object(c.a)((function(e){I(e),_(1)}),[I,_]),A=Object(c.a)((function(e){P(e),_(Math.floor((z-1)*k/e)+1)}),[k,P,z,_]);Object(c.d)((function(){localStorage.setItem("scoreboardPageState",JSON.stringify({pageSize:k,division:L}))}),[k,L]),Object(c.d)((function(){1===z&&""===location.search||history.replaceState({},"","?page="+z+"&division="+encodeURIComponent(L)+"&pageSize="+k)}),[k,L,z]);var K=Object(c.a)((function(e){return q(e.target.value)}),[q]),Q=Object(c.a)((function(e){return A(e.target.value)}),[A]);Object(c.d)((function(){document.title="Scoreboard | "+s.a.ctfName}),[]),Object(c.d)((function(){o&&Object(v.c)().then((function(e){var t=e.data,n=e.error;n&&W({body:n,type:"error"}),y(t)}))}),[o,W]),Object(c.d)((function(){new Promise((function(e,t){var n,r,o,a;return n="all"===L?void 0:L,Promise.resolve(Object(p.b)({division:n,offset:(z-1)*k,limit:k})).then((function(n){try{return a=(r=n).data,V("badNotStarted"===(o=r.kind)?h:O),"goodLeaderboard"!==o||(M(a.leaderboard.map((function(e,t){return i(i({},e),{},{rank:t+1+(z-1)*k})}))),B(a.total)),e()}catch(e){return t(e)}}),t)}))}),[L,z,k]),Object(c.d)((function(){new Promise((function(e,t){var n,r,o,i;return n="all"===L?void 0:L,Promise.resolve(Object(p.a)({division:n})).then((function(n){try{return i=(r=n).data,H("badNotStarted"===(o=r.kind)?h:O),"goodLeaderboard"!==o||E(i),e()}catch(e){return t(e)}}),t)}))}),[L]);var Z=o&&null!==j&&null!==j.globalPlace&&("all"===L||Number.parseInt(L)===j.division),$=Object(c.g)((function(){if(null==j)return!1;var e=!1;return S.forEach((function(t){t.id===j.id&&(e=!0)})),e}),[j,S]),ee=Object(c.a)((function(){Y.current.scrollIntoView({block:"nearest",behavior:"smooth"})}),[Y]),te=Object(c.j)(!1),ne=te[0],re=te[1],oe=Object(c.a)((function(){var e;Z&&(e="all"===L?j.globalPlace:j.divisionPlace,_(Math.floor((e-1)/k)+1),$?ee():re(!0))}),[j,_,k,L,Z,$,ee]);return Object(c.d)((function(){ne&&$&&(ee(),re(!1))}),[$,ne,ee]),R===g||J===g?null:R===h||J===h?e(d.a,null):e("div",{class:"row u-center",style:"align-items: initial !important"},e("div",{class:"col-12 u-center"},e("div",{class:"col-8"},e(f.a,{graphData:X}))),e("div",{class:"col-3"},e("div",{class:"frame "+n.frame},e("div",{class:"frame__body"},e("div",{class:"frame__subtitle"},"Filter by division"),e("div",{class:"input-control"},e("select",{required:!0,class:"select",name:"division",value:L,onChange:K},e("option",{value:"all",selected:!0},"All"),Object.entries(s.a.divisions).map((function(t){var n=t[0];return e("option",{key:n,value:n},t[1])})))),e("div",{class:"frame__subtitle"},"Teams per page"),e("div",{class:"input-control"},e("select",{required:!0,class:"select",name:"pagesize",value:k,onChange:Q},m.map((function(t){return e("option",{value:t},t)})))),o&&e("div",{class:"btn-container u-center"},e("button",{disabled:!Z,onClick:oe},"Go to my team"))))),e("div",{class:"col-6"},e("div",{class:"frame "+n.frame+" "+n.tableFrame},e("div",{class:"frame__body"},e("table",{class:"table small "+n.table},e("thead",null,e("tr",null,e("th",{style:"width: 3.5em"},"#"),e("th",null,"Team"),e("th",{style:"width: 5em"},"Points"))),e("tbody",null,S.map((function(t){var r=t.id,o=t.name,i=t.score,a=null!=j&&j.id===r;return e("tr",{key:r,class:a?n.selected:"",ref:a?Y:null},e("td",null,t.rank),e("td",null,e("a",{href:"/profile/"+r},o)),e("td",null,i))}))))),N>k&&e(l.a,r({totalItems:N,pageSize:k,page:z,setPage:_},{numVisiblePages:9})))))}));t.default=j}.call(this,n("sL3o").h)}}]);